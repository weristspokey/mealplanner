{% extends 'base.html.twig' %}
{% block body %}
    <section class="content-section">
        <div class="container">
            {% include ('flash-messages.html.twig') %}
            <div class="row">
                <div class="col-md-12">
                    <h1 class="text-center">Recipes</h1>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="col-md-3 m-auto">
                    <div class="card">
                        <div class="card-header">
                            <a href="{{ path('recipe_new') }}">
                        <span class="fa fa-plus" aria-hidden="true"> Add Recipe</span>
                    </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 m-auto">
                    <div class="card">
                        <div class="card-header">
                           <a href="{{ path('tag_new') }}">
                        <span class="fa fa-plus" aria-hidden="true"> Add Tag</span>
                    </a>
                        </div>
                    </div>
                </div>
            </div>
            <p style="margin-bottom: 2px">{{ knp_pagination_sortable(recipes, 'Name', 'recipe.name') }}</p>
                <p style="margin-bottom: 2px">{{ knp_pagination_sortable(recipes, 'Tags', 'recipe.tags') }}</p>
            <div class="row" style="border-bottom: 1px solid #9D759D; margin-bottom: 10px; padding-bottom: 5px">
                <div class="col-md-3">
                    <form action="{{ path('recipe_index') }}" method="GET">
                    <input name="filter" type="text" placeholder="Filter by name" size="19">
                    <button style="margin-bottom: 4px;" type="submit" class="btn btn-default btn-sm">Search</button>
                    </form>
                </div>
                <div class="col-md-2">
                    <form action="{{ path('recipe_index') }}" method="GET">
                        <select id="tagFilter" name="filter" class="selectpicker" data-width="75%">
                            {% for tag in tags %}
                                <option>{{tag.name}}</option>
                            {% endfor %}
                        </select>
                        <button type="submit" class="btn btn-default btn-sm">Go</button>
                    </form>
                </div>
                <div class="col-md-1 pull-right">
                    <a href="{{ path('recipe_index') }}">Show all</a>
                </div>
            </div>
            <div class="row thumbnail-gallery recipes-gallery">
                {% for recipe in recipes %}
                <div class="col-lg-3 col-sm-3 col-md-3">
                    <img src="{{ asset('uploads/images/' ~ recipe.image) }}" class="img-thumbnail">
                    <a href="{{ path('recipe_show', { 'id': recipe.id }) }}" title="{{ recipe.name }}"><div class="thumbnail-hoverbox">
                        <p>{{ recipe.name }}</p>
                        <p style="font-size:14px">Tags:
                        {% for tag in recipe.tags %}
                           {{tag.name}}
                        {% endfor %}
                        </p>
                    </div></a>
                </div>
                {% endfor %}
            </div>
            <div class="row">
                <div class="navigation mx-auto">
                    {{ knp_pagination_render(recipes) }}
                </div>
            </div>
        </div>
    </section>
{% endblock %}
